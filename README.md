# CSSTA

Experimental project very similar to [styled components](https://styled-components.com), except that it can generate real CSS files, and gives more prop validation than styled components.

**Can generate real CSS files for production** (with really tiny class names). Scopes all declarations as well as keyframes.

```
npm install --save cssta
npm install --save-dev babel-plugin-cssta
```

# Usage

The basic usage is identical to styled components.

```js
import cssta from 'cssta';

const Button = cssta.button`
  color: black;
`;

<Button>Test</Button>
```

Similar to styled components, you can use pseudo selectors. However, here, the nesting operator (`&`) is optional.


```js
const Button = cssta.button`
  color: black;

  :hover {
    color: red;
  }
`;

<Button>Hover Me</Button>
```

Where styled components uses `${template expressions}` to enable dynamic CSS, we use attribute selectors. These attribute selectors are mapped to React props, and are type checked using `propTypes`.

You can have two types of property, `[booleanValue]` and `[stringValue="..."]`, but one property cannot be both.

```js
const Button = cssta.button`
  color: black;

  /* Boolean */
  [large] {
    font-size: 2em;
  }

  /* String */
  [color="red"] {
    color: red;
  }

  [color="green"] {
    color: green;
  }
`;

<Button>Regular Button</Button>
<Button large>Large Button</Button>
<Button color="red">Red Button</Button>
<Button large color="green">Large Green Button</Button>
```

Similar to styled components, we scope animation names to the component.

```js
const Button = cssta.button`
  animation: 1s scoped-animation;

  @keyframes scoped-animation {
    0% { opacity: 0; }
  }
`;
```

Lastly, if you need to override the element tag for the component, you can set the `component` property.

```js
<Button component="span">I am a span</Button>
```

In dev, we generate a style element and insert it into the document.

In production, we'll use a babel plugin that will generate a **real CSS file**. The `cssta` calls are replaced with `createComponent` calls, where the `createComponent` is ~1kb when minified (more when gzipped).

# Composition

Like in styled components, you can compose components to style them.

```js
import { Link } from 'react-router';

const StyledLink = cssta(Link)`
  color: red;
`;
```

**Note you cannot yet compose a styled components**. We'll probably do something a bit different to styled components.

```js
// NOT WORKING
const Button = cssta.button`color: red;`;
const LargeButton = cssta(Button)`font-size: large`;
```

# Babel Plugin

The cssta module was designed to work in a development environment, so you don't want to use it in production. You can use `babel-plugin-cssta` to transform the cssta call into an object mapping and extract the CSS (and remove the import).

You can transform multiple files, and the CSS will be concatenated. However, **before you run babel, you must delete the existing CSS file** so you don't end up with duplicate CSS.

```js
{
  "plugins" [
    ["babel-plugin-cssta", {
      "output": "dist/styles.css"
    }]
  ]
}
```

The output is relative to your current working directory.

### In

```js
const Button = cssta.button`
  color: black;

  [large] {
    font-size: 18pt;
  }
`;
```

### Out

```js
import createComponent from 'cssta/lib/createComponent';
const Button = createComponent('button', '.A', {large:'.B'}); // Uses internal representation of class semantics
```

### CSS

```css
/* File generated by babel-plugin-cssta */

.A {
  color: black;
}

.B {
  font-size: 18pt;
}
```

# Demo and Building

See `cssta-demo`

* Run `npm start` for dev mode.
* Run `npm run build-cssta` for prod build, and see output JS and CSS files in `./dist`.
